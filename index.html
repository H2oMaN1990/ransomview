<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ransomlook API Data</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f9;
        }
        h1 {
            color: #333;
        }
        pre {
            background-color: #eee;
            border: 1px solid #ccc;
            padding: 15px;
            overflow-x: auto; /* Allows horizontal scrolling for long data */
            white-space: pre-wrap; /* Wraps text within the box */
        }
        .loading {
            color: #555;
            font-style: italic;
        }
    </style>
</head>
<body>

    <h1>Data from Ransomlook API</h1>
    
    <pre id="api-data" class="loading">Loading data...</pre>

    <script>
        // The API endpoint you want to call
        const API_URL = 'https://www.ransomlook.io/api/last';
        
        /**
         * Function to fetch data from the API and display it on the page.
         */
        async function fetchData() {
            const dataElement = document.getElementById('api-data');
            
            try {
                // 1. Make the API request using the Fetch API (similar to your curl command)
                const response = await fetch(API_URL, {
                    method: 'GET', // curl -X 'GET'
                    headers: {
                        'Accept': 'application/json' // -H 'accept: application/json'
                    }
                });

                // Check if the request was successful
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                // 2. Parse the JSON response body
                const data = await response.json();

                // 3. Format the JSON data nicely for display
                const prettyJson = JSON.stringify(data, null, 4); // null, 4 is for indentation

                // 4. Update the HTML element with the formatted data
                dataElement.textContent = prettyJson;
                dataElement.classList.remove('loading');

            } catch (error) {
                // Handle any errors during the fetch or parsing process
                console.error('Fetch error:', error);
                dataElement.textContent = 'Error fetching data: ' + error.message;
                dataElement.classList.remove('loading');
            }
        }

        // Call the function to start fetching the data when the page loads
        fetchData();
    </script>

</body>
</html>
